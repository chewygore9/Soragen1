import json, random, time

def generate_snap_prompt(json_path="snap_style_generator.json"):
    with open(json_path, "r") as f:
        data = json.load(f)
    
    pick = lambda key: random.choice(data[key])
    
    personality = pick("personality_level")
    duration = pick("video_duration_sec")
    theme = pick("theme")
    lighting = pick("lighting_style")
    camera = pick("camera_effects")
    visual = pick("visual_style")
    audio = pick("audio_style")
    text_style = pick("text_overlay_style")
    cta = pick("call_to_action")

    # Add Tyrone-style flavor text
    if personality == "calm":
        vibe = f"Relaxed and cinematic, smooth transitions and natural tone."
    elif personality == "witty":
        vibe = f"Playful rhythm, quick cuts, tongue-in-cheek narration, sharp one-liners."
    else:
        vibe = f"Chaotic and explosive, jump cuts, spinning shots, wild energy, unfiltered Tyrone commentary!"

    # Build final prompt
    final_prompt = f"""
    [Sora Video Prompt - Snap Remix]

    Duration: {duration}s  
    Theme: {theme}  
    Lighting: {lighting}  
    Camera: {camera}  
    Visual: {visual}  
    Audio: {audio}  
    Text Overlay: {text_style}  
    Personality: {personality.upper()}  
    Call To Action: {cta}  

    Scene Description:
    Create a fast-cut, {theme.lower()} inspired clip with {lighting.lower()} lighting and {camera.lower()} camera motion. 
    Add {visual.lower()} visuals synced to {audio.lower()} soundtrack. 
    On-screen text styled as {text_style.lower()} flashes across the screen with {cta}. 
    Vibe: {vibe}

    Narration (Tyrone style): 
    ‚ÄúYo, it‚Äôs {theme} energy time, baby! Let‚Äôs roll the dice, snap the vibe, and flip the scene ‚Äî {cta}!‚Äù

    """

    return final_prompt.strip()

if __name__ == "__main__":
    print("üî• SNAP STYLE GENERATOR üî•")
    while True:
        print("\n" + "="*60)
        print(generate_snap_prompt())
        print("="*60)
        again = input("Generate another? (y/n): ").strip().lower()
        if again != 'y':
            break